<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    lang="en"
    i18n:domain="dkiscm.jobmatrix">
    <head>
        <style>
            .dkiscm-jobgrouping-table td,
            .dkiscm-education-table td { text-align:center }  

            .skilltable { padding: 2px; background: #DDDEE0; font-size:9px}
            th { background: #7F858E; color: #ffffff; padding-top:4px } 

            .skilltable { border:1px solid #ffffff; }
            .descriptioncolumn { background: #7F858E; }
            .educationtable,
            .jobgroupingtable { 
                border:1px solid #ffffff; 
                font-size: 8px;
                padding: 4px 2px 0 2px;
                text-align:center;
                vertical-align:middle;
            }
            h4 { margin-bottom: 0 }
            .selected-education,
            .selected-group {
                background: #D95943;
            }

.weight-table {
    width:200px;
}

.weight-table td {
    text-align:center;
}

        </style>
        <style tal:content="structure view/cluster_css">
        </style>
    </head>
    <body style="font-size:10px">

        <table style="width:100%;" class="dkiscm-job-titletable"
            tal:define="resurl string:${context/portal_url}/++resource++dkiscm.jobmatrix">
            <tr>
                <td style="width:200px">
                    <h4 style="font-size:12px">Job Code</h4>
                    <h1 style="font-size:16px"><tal:block replace="context/job_code"/> </h1>
                </td>
                <td>
                    <h4 style="font-size:12px">Job Type</h4>
                    <h1 style="font-size:16px"><tal:block replace="context/pretty_title_or_id"/></h1>
                </td>
                <td style="text-align:right">
                    <img style="height:50px;width:50px"
                        tal:condition="context/suitable_for_entry"
                        tal:attributes="src string:${resurl}/suitable-for-entry.png"/>
                    <img 
                        style="height:50px;width:50px"
                        tal:attributes="src string:${resurl}/job-demand-${view/job_demand}.png"/>
                </td>

            </tr>
        </table>

        <metal:content-core define-macro="content-core">

            <table class="dkiscm-job-information"
                style="border-top:2px solid #000;border-bottom:2px solid #000;padding-top:5px;
                       margin-bottom:10px;">
                <tr>
                    <td rowspan="2" class="left-box cluster-infobox" style="padding:5px 10px;color: #ffffff">
                        <div class="dkiscm-jobgrouping">
                            <h4>Job Grouping</h4>
                            <table class="jobgroupingtable">
                                <tr>
                                    <td tal:repeat="group view/job_grouping"
                                        tal:content="group/title"
                                        tal:attributes="class group/css_class"/>
                                </tr>
                            </table>
                        </div>

                        <div class="dkiscm-education">
                            <h4>Education</h4>
                            <table class="educationtable">
                                <tr>
                                    <td tal:repeat="education view/education"
                                        tal:content="education/title"
                                        tal:attributes="class education/css_class">
                                    </td>
                                </tr>
                            </table>
                            <div style="font-size:8px">* <span tal:replace="structure view/w/education_description/render"/></div>
                        </div>
                    </td>
                    <td style="vertical-align:top;padding:5px;">
                        <div class="dkiscm-jobdescription">
                            <h4>Job Description</h4>
                            <p style="font-size:10px"
                                tal:content="context/description"></p>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td style="vertical-align:top;padding:5px;">
                        <div class="dkiscm-jobtitles">
                            <h4>Similar Job Titles</h4>
                            <div style="font-size:10px"
                                tal:condition="context/similar_job_titles"
                                tal:content="python: ', '.join(context.similar_job_titles)"></div>
                        </div>
                    </td>
                </tr>
            </table>
            <table class="skilltable">
                <thead>
                    <tr>
                        <th class="dkiscm-number-column"
                            style="width:20px;text-align:center">No</th>
                        <th>Description</th>
                        <th class="dkiscm-value-column" tal:repeat="explvl view/exp_levels"
                            tal:content="explvl/title">
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="width:20px;text-align:center"
                            class="counter-cell">1</td>
                        <td class="descriptioncolumn">Industry Experience</td>
                        <td tal:repeat="exp view/industry_experience"
                            tal:attributes="class python:'required-cell' if exp.value in context.exp_levels else ''">
                            <tal:block condition="python:exp.value in context.exp_levels" replace="exp/title"/>
                        </td>
                    </tr>

                    <tr>
                        <td style="width:20px;text-align:center"
                            class="counter-cell">2</td>
                        <td class="descriptioncolumn">Professional Certification</td>
                        <td tal:attributes="colspan python:len(context.exp_levels)"
                            class="required-cell">
                            <tal:block condition="context/professional_certification"
                                replace="python:', '.join(context.professional_certification)"/>
                        </td>
                        <td tal:repeat="cell python:range(5-len(context.exp_levels))">
                        </td>
                    </tr>
                    <tr>
                        <td style="width:20px;text-align:center"
                            class="counter-cell">3</td>
                        <td class="descriptioncolumn">Salary Range</td>
                        <tal:block define="vals context/salary_range|nothing;
                            item python:vals[0] if vals else None">
                            <tal:c condition="item">
                                <td tal:repeat="exp view/exp_levels"
                                    tal:attributes="class python:'required-cell' if item[exp.value] else ''">
                                    <span tal:replace="python:item[exp.value]"/>&nbsp;
                                </td>
                            </tal:c>
                            <tal:c condition="not:item">
                                <td tal:repeat="exp view/exp_levels">&nbsp;</td>
                            </tal:c>
                        </tal:block>
                    </tr>
                </tbody>
            </table>

            <h2>Technical Skills Competency</h2>
            <p style="font-size:10px">(Note: Skills marked in darker color are 'required skills'; skills marked in lighter color are 'elective skills')</p>
            <table class="skilltable">
                <thead>
                    <tr>
                        <th class="dkiscm-number-column"
                            style="width:20px;text-align:center">No</th>
                        <th>Skill</th>
                        <th class="dkiscm-value-column" tal:repeat="exp view/exp_levels" tal:content="exp/title"></th>
                    </tr>
                </thead>
                <tbody>
                    <tal:block repeat="item context/skills_competency">
                        <tr>
                            <td style="width:20px;text-align:center"
                                tal:define="idx repeat/item/index"
                                class="counter-cell">
                                <tal:r replace="python:idx + 1"/>
                            </td>
                            <tal:c condition="item">
                                <td class="descriptioncolumn">
                                    <span tal:replace="item/skill"/>&nbsp;
                                </td>
                                <td tal:repeat="exp view/exp_levels"
                                    tal:attributes="class python:view.get_technical_skill_cell_class(item, exp)">
                                    <span tal:replace="python:item[exp.value]"/>&nbsp;
                                </td>
                            </tal:c>
                            <tal:c condition="not:item">
                                <td>&nbsp;</td>
                                <td tal:repeat="exp view/exp_levels">&nbsp;</td>
                            </tal:c>
                        </tr>
                    </tal:block>
                </tbody>
            </table>

            <pdf:nextpage/>
            <h2>Soft Skills Competency</h2>
            <p style="font-size:10px;font-weight:normal">(Note: Lighter color gradient indicates basic level proficiency; darker color gradient indicates higher level proficiency)</p>
            <table class="weight-table" style="width:20px !important">
                <tr>
                    <td tal:repeat="weight python:range(1,6)"
                        style="width:20px;font-size:10px;padding-top:3px;padding-left:4px;"
                        tal:attributes="class string:weight-cell-${weight}"
                        tal:content="weight">
                    </td>
                </tr>
            </table>
            <table class="skilltable"
                style='font-weight:normal'
                tal:define="cols view/softskills_competency_columns">
                <thead>
                    <tr>
                        <th style="width:20px;text-align:center" 
                            class="dkiscm-number-column">No</th>
                        <th>Skill</th>
                        <th class="dkiscm-value-column" tal:repeat="exp view/exp_levels" tal:content="exp/title"></th>
                    </tr>
                </thead>
                <tbody>
                    <tal:block repeat="item context/softskills_competency">
                        <tr>
                            <td style="width:20px;text-align:center" 
                                tal:define="idx repeat/item/index"
                                class="counter-cell">
                                <tal:r replace="python:idx + 1"/>
                            </td>
                            <tal:c condition="item">
                                <td class="descriptioncolumn">
                                    <span tal:replace="item/skill"/>&nbsp;
                                </td>
                                <td tal:repeat="exp view/exp_levels"
                                    tal:attributes="class python:'weight-cell-%s' % (
                                    item['%s_weight' % exp.value]) if (
                                    item[exp.value]) else ''">
                                    <span tal:replace="python:item[exp.value]"/>&nbsp;
                                </td>
                            </tal:c>
                            <tal:c condition="not:item">
                                <td>&nbsp;</td>
                                <td tal:repeat="col cols">&nbsp;</td>
                            </tal:c>
                        </tr>
                    </tal:block>
                </tbody>
            </table>


        </metal:content-core>
    </body>
</html>


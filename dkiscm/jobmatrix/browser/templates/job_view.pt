<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="dkiscm.jobmatrix">
      <head>
      </head>
      <body>

          <metal:title fill-slot="content-title">
              <table style="width:100%;" class="dkiscm-job-titletable">
                  <tr>
                      <td style="width:200px">
                          <h4>Job Code</h4>
                          <h1><tal:block replace="context/job_code"/> </h1>
                      </td>
                      <td>
                          <h4>Job Type</h4>
                          <h1><tal:block replace="context/pretty_title_or_id"/></h1>
                      </td>
                  </tr>
              </table>
          </metal:title>
    <metal:description fill-slot="content-description"></metal:description>

    <metal:main fill-slot="content-core">

        <metal:content-core define-macro="content-core">

            <table class="dkiscm-job-information">
                <tr>
                    <td rowspan="2" class="left-box">
                        <div class="dkiscm-jobgrouping">
                            <h4>Job Grouping</h4>
                            <table class="dkiscm-jobgrouping-table">
                                <tr>
                                    <td tal:repeat="group view/job_grouping"
                                        tal:content="group/title"
                                        tal:attributes="class group/css_class"/>
                                </tr>
                            </table>
                        </div>

                        <div class="dkiscm-education">
                            <h4>Education</h4>
                            <table class="dkiscm-education-table">
                                <tr>
                                    <td tal:repeat="education view/education"
                                        tal:content="education/title"
                                        tal:attributes="class education/css_class">
                                    </td>
                                </tr>
                            </table>
                            <div>* <span tal:content="structure view/w/education_description/render"/></div>
                        </div>
                    </td>
                    <td style="vertical-align:top;">
                        <div class="dkiscm-jobdescription">
                            <h4>Job Description</h4>
                            <p tal:content="context/description"></p>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td style="vertical-align:top;">
                        <div class="dkiscm-jobtitles">
                            <h4>Similar Job Titles</h4>
                            <div tal:content="python: ', '.join(context.similar_job_titles)"></div>
                        </div>
                    </td>
                </tr>
            </table>
      <table class="dkiscm-skilltable plain">
          <thead>
              <tr>
                  <th class="dkiscm-number-column">No</th>
                  <th>Description</th>
                  <th class="dkiscm-value-column" tal:repeat="explvl view/exp_levels"
                      tal:content="explvl/title">
                  </th>
              </tr>
          </thead>
          <tbody>
              <tr class="required-row">
                  <td>1</td>
                  <td class="dkiscm-description-column">Industry Experience</td>
                  <td tal:repeat="exp view/industry_experience"
                      tal:attributes="class python:'has_value' if exp.value in context.exp_levels else ''">
                      <tal:block condition="python:exp.value in context.exp_levels" replace="exp/title"/>
                  </td>
              </tr>

              <tr class="required-row">
                  <td>2</td>
                  <td class="dkiscm-description-column">Professional Certification</td>
                  <td colspan="5"
                      tal:content="python:', '.join(context.professional_certification)">
                  </td>
              </tr>
              <tr class="required-row" tal:replace="nothing">
                  <td>2</td>
                  <td class="dkiscm-description-column">Industry Certification</td>
                  <tal:block define="vals context/industry_certification|nothing;
                      item python:vals[0] if vals else None">
                      <tal:c condition="item">
                          <td tal:repeat="exp view/exp_levels"
                              class="has_value">
                              <span tal:replace="python:item[exp.value]"/>&nbsp;
                          </td>
                      </tal:c>
                      <tal:c condition="not:item">
                          <td tal:repeat="exp view/exp_levels">&nbsp;</td>
                      </tal:c>

                  </tal:block>

              </tr>

              <tr class="required-row">
                  <td>3</td>
                  <td class="dkiscm-description-column">Salary Range</td>
                  <tal:block define="vals context/salary_range|nothing;
                      item python:vals[0] if vals else None">
                      <tal:c condition="item">
                          <td tal:repeat="exp view/exp_levels"
                              class="has_value">
                              <span tal:replace="python:item[exp.value]"/>&nbsp;
                          </td>
                      </tal:c>
                      <tal:c condition="not:item">
                          <td tal:repeat="exp view/exp_levels">&nbsp;</td>
                      </tal:c>
                  </tal:block>
              </tr>
          </tbody>
      </table>

      <h2>Technical Skills Competency</h2>
      <table class="dkiscm-skilltable plain">
          <thead>
              <tr>
                  <th class="dkiscm-number-column">No</th>
                  <th>Skill</th>
                  <th class="dkiscm-value-column" tal:repeat="exp view/exp_levels" tal:content="exp/title"></th>
              </tr>
          </thead>
          <tbody>
              <tal:block repeat="item context/skills_competency">
                  <tr tal:attributes="class python:'required-row' if item['is_required'] else ''">
                      <td tal:define="idx repeat/item/index">
                          <tal:r replace="python:idx + 1"/>
                      </td>
                      <tal:c condition="item">
                          <td class="dkiscm-description-column">
                              <span tal:replace="item/skill"/>&nbsp;
                          </td>
                          <td tal:repeat="exp view/exp_levels"
                              tal:attributes="class python:'has_value' if (
                                    item[exp.value] and item[exp.value].strip()) else ''">
                              <span tal:replace="python:item[exp.value]"/>&nbsp;
                          </td>
                      </tal:c>
                      <tal:c condition="not:item">
                          <td>&nbsp;</td>
                          <td tal:repeat="exp view/exp_levels">&nbsp;</td>
                      </tal:c>
                  </tr>
              </tal:block>
          </tbody>
      </table>
      <h2>Soft Skills Competency</h2>
      <table class="dkiscm-skilltable plain" 
          tal:define="cols view/softskills_competency_columns">
          <thead>
              <tr>
                  <th class="dkiscm-number-column">No</th>
                  <th>Skill</th>
                  <th class="dkiscm-value-column" tal:repeat="col cols">
                      <tal:r define="idx repeat/col/index"
                          replace="python:idx + 1"/>
                  </th>
              </tr>
          </thead>
          <tbody>
              <tal:block repeat="item context/softskills_competency">
                  <tr tal:attributes="class python:'required-row' if item['is_required'] else ''">
                      <td tal:define="idx repeat/item/index">
                          <tal:r replace="python:idx + 1"/>
                      </td>
                      <tal:c condition="item">
                          <td class="dkiscm-description-column">
                              <span tal:replace="item/skill"/>&nbsp;
                          </td>
                          <td tal:repeat="col cols"
                              tal:attributes="class python:'has_value' if (item[col] and item[col].strip()) else ''">
                              <span tal:replace="python:item[col]"/>&nbsp;
                          </td>
                      </tal:c>
                      <tal:c condition="not:item">
                          <td>&nbsp;</td>
                          <td tal:repeat="col cols">&nbsp;</td>
                      </tal:c>
                  </tr>
              </tal:block>
          </tbody>
      </table>


  </metal:content-core>
</metal:main>

</body>
</html>

